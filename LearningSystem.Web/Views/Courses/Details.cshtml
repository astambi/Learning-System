@model CourseDetailsServiceModel
@{
    ViewData["Title"] = "Course Details";
    var remainingTimeSpan = Model.Course.StartDate.ToLocalTime().Subtract(DateTime.Now);
    var remainingDays = remainingTimeSpan.Days;
    var remainingHours = remainingTimeSpan.Hours;
    var enrollmentMsg = remainingDays > 0
        ? $"Course is open for enrollment for {remainingDays} more day(s)"
        : remainingHours > 0
            ? $"Course is open for enrollment for {remainingHours} more hour(s)"
            : "Course is closed for enrollment after start date";
}

<section class="col-lg-8 m-auto">
    <article class="card mb-3 shadow">
        <h3 class="bg-gradient card-header text-center p-5">@Model.Course.Name</h3>
        <div class="card-body">
            <div class="card-title d-flex flex-wrap justify-content-between px-2">
                <h5><i class="fa fa-hourglass-start"></i> @Model.Course.StartDate.ToDate()</h5>
                <h5><i class="fa fa-hourglass-end"></i> @Model.Course.EndDate.ToDate()</h5>
                <h5><i class="fa fa-clock"></i> @Model.Course.Duration day(s)</h5>
            </div>
        </div>
        @if (remainingHours > 0)
        {
            <div class="card-body d-flex flex-wrap justify-content-between align-items-center bg-info">
                <h5 class="card-subtitle text-white">@enrollmentMsg</h5>
            </div>
            <div class="card-body text-center">
                <a href="#" class="btn btn-lg btn-info">Subscribe</a>
            </div>
        }
        <ul class="list-group list-group-flush">
            <partial name="_CourseHeaderPartial" model="@(" Enrollment")" />
            <partial name="_CourseBodyPartial" model="@enrollmentMsg" />

            <partial name="_CourseHeaderPartial" model="@(" Description")" />
            <partial name="_CourseBodyPartial" for="Course.Description" />

            <partial name="_CourseHeaderPartial" model="@(" Schedule")" />
            <partial name="_CourseBodyPartial" model="@Model.Course.StartDate.ToDate()" />
            <partial name="_CourseBodyPartial" model="@Model.Course.EndDate.ToDate()" />

            <partial name="_CourseHeaderPartial" model="@(" Duration")" />
            <partial name="_CourseBodyPartial" model="@(Model.Course.Duration.ToString() + " day(s)")" />

            <partial name="_CourseHeaderPartial" model="@(" Trainer")" />
            <partial name="_CourseBodyPartial" for="Trainer.Name" />

            <partial name="_CourseHeaderPartial" model="@(" Students enrolled")" />
            <partial name="_CourseBodyPartial" model="@Model.Students.ToString()" />
        </ul>

        <div class="card-footer text-muted">@enrollmentMsg</div>
    </article>
</section>

<partial name="_AdminCourseActionsPartial" for="Course.Id" />